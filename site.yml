---
- name: set up proxy and update all machines
  sudo: yes
  hosts: all
  roles:
    - proxy
    - update

- name: deploy elasticsearch cluster
  sudo: yes
  hosts: elasticsearch
  roles:
    - java
    - elasticsearch

- name: set up cron backup on the master nodes
  sudo: yes
  hosts: masters
  roles:
    - elasticsearch-plugins
    - cron

- name: deploy nginx on web server
  sudo: yes
  hosts: web
  roles:
    - apache
